{% load static %}
<html lang="ru">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Хост панель</title>

    {% load static %}
    <link rel="stylesheet" href="{% static "panel/css/sb-admin-2.min.css" %}">
    <link rel="stylesheet" href="{% static "panel/css/app.css" %}">
    {% block css %}{% endblock %}
</head>
<body id="page-top" class="bg-dark">

<div id="wrapper">
    <div id="alert-success" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-body bg-success text-white" v-text="message"></div>
    </div>
    <div id="alert-fail" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-body bg-danger text-white" v-text="error"></div>
    </div>


    <div class="container-fluid" id="main">
        <div class="row">

            <div class="col-md-9">

                <div class="row">
                    <div class="col card shadow my-4">
                        <div class="card-body">
                            <a class="btn btn-primary" href="{% url 'panel:index' %}">Главная</a>
                            <a class="btn btn-primary" href="{% url 'panel:m_packages' %}">M сборки</a>
                            <a class="btn btn-primary" href="{% url 'panel:sr_packages' %}">SR сборки</a>
                            <a class="btn btn-primary" href="{% url 'panel:dedicated' %}">Dedicated servers</a>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col md-3">
                        {% block content %}{% endblock %}
                    </div>
                </div>

            </div>

            <div class="col md-3 my-4">
                <div class="card sticky-top">
                    <div class="card-header">
                        <h3>Текущие задачи</h3>
                    </div>
                    <div class="card-body">
                        <template v-for="task in tasks">
                            <p>
                                <b v-text="task['action']"></b> <span v-text="task['unit_name']"></span>
                                <i v-text="'#' + task['params'][0][0]"></i>
                                <span v-if="task['locked_by']" class='text-success'>(выполняется)</span>
                                <span v-else-if="task['last_error']" class='text-danger'>(ошибка)</span>
                            </p>
                            <hr>
                        </template>
                    </div>
                </div>
                <div class="card mt-4">
                    <div class="card-header">
                        <h3>HostPanel</h3>
                    </div>
                    <div class="card-body">
                        <p><b>Версия панели:</b> {{ PANEL_VERSION }}</p>
                        <p><b>Версия Caretaker:</b> {{ CARETAKER_VERSION }}</p>
                        <p><b>Версия MySQL:</b> {{ MYSQL_VERSION }}</p>
                    </div>
                </div>
            </div>
        
        </div>

    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
<script src="{% static "panel/js/sb-admin-2.min.js" %}"></script>
<script src="https://kit.fontawesome.com/a26f2e3b53.js" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.12"></script>
{% block js %}{% endblock %}
{% block extra_footer %}{% endblock %}
</body>
</html>
